<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MikuMiku | Home</title>
    <link rel="stylesheet" href="/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

    <div id="game-modal" class="game-modal">
        <div class="game-container">
            <h1>Match the Cards to Enter</h1>
            <div id="game-board" class="game-board"></div>
            <div id="game-status"></div>
        </div>
    </div>

    <div id="main-content" style="display: none;">
        <div class="title-bar">
            <div class="container">
                <img src="/logo.webp" alt="Logo" class="logo">
                <h1 class="site-title">MikuMiku</h1>
            </div>
        </div>
        

        <div class="banner">
            <img src="/banner.webp" alt="Banner Image" class="banner-img">
        </div>

        <div class="content-wrapper">
    
            <div id="now-playing" class="now-playing">
                <div class="now-playing-content">
               
                    <img id="videoThumbnail" src="" alt="Video Thumbnail" class="video-thumbnail">
                   
                    <div class="video-title-container">
                        <h2>Currently Playing on YouTube</h2>
                        <p id="videoTitle">Loading...</p>
                    </div>
                </div>
            </div>

          
            <div class="about">
                <div class="container">
                    <h2>About Me</h2>
                    <p>Hey there, I'm Hystoriya, a 24-year-old developer and tetragametic chimera. If you are looking for 24/7 Discord bot hosting or Minecraft servers, then you should totally check out <a href="https://pylexnodes.net/" target="_blank">Pylexnodes</a>.</p>
                    <div class="community-section">
                        If you're looking for a Destiny 2 clan or a chill community to hang out in, join us below.
                        <div class="arrow-down"></div>
                    </div>
                    <div class="discord-widget fancy-discord-widget">
                        <div class="discord-widget-header">
                            <img src="/discord-logo.png" alt="Discord Logo" class="discord-logo">
                            <h3>Join Our Discord Community</h3>
                        </div>
                        <div class="discord-widget-body">
                            <div class="iframe-container">
                                <iframe src="https://discord.com/widget?id=998323411304591481&theme=dark" allowtransparency="true" sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"></iframe>
                            </div>
                        </div>
                        <div class="discord-widget-footer">
                            <a href="https://discord.gg/i-a" target="_blank" class="join-button">Join Us</a>
                        </div>
                    </div>
                </div>
            </div>
        </div> 

        <footer class="footer">
            <div class="container">
                <p>&copy; 2024 MikuMiku. All rights reserved.</p>
                <p><a href="/admin-login.html">Admin Login</a></p>
            </div>
        </footer>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <script>
      
    document.addEventListener('DOMContentLoaded', function () {
        // Connect to the server using Socket.IO
        const socket = io('https://mikumiku.dev'); // Replace with your server URL
    
        socket.on('connect', () => {
            console.log('Connected to server');
        });
    
        // Function to extract the video ID from a YouTube URL
        function extractYouTubeVideoID(url) {
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=|youtube.com\/shorts\/)([^#\&\?]*).*/;
            const match = url.match(regExp);
            return (match && match[2].length === 11) ? match[2] : null;
        }
    
        // Listen for 'nowPlayingUpdate' event from the server
        socket.on('nowPlayingUpdate', (data) => {
            console.log('Received video title:', data.title);
            console.log('Received video URL:', data.videoUrl); // Log the video URL
            
            const videoTitleElement = document.getElementById('videoTitle');
            const videoThumbnailElement = document.getElementById('videoThumbnail');
    
            if (videoTitleElement) {
                videoTitleElement.innerText = data.title || 'No video playing';
            }
    
            // Extract the video ID from the YouTube URL and set the thumbnail image
            const videoID = extractYouTubeVideoID(data.videoUrl);
            if (videoID) {
                const thumbnailUrl = `https://img.youtube.com/vi/${videoID}/hqdefault.jpg`; // Use HQ thumbnail
                videoThumbnailElement.src = thumbnailUrl;
                videoThumbnailElement.alt = data.title || 'Video Thumbnail';
            } else {
                console.warn('No valid YouTube video URL received. Using placeholder image.');
                // Use placeholder image if video ID is not valid
                videoThumbnailElement.src = 'https://raw.githubusercontent.com/hatsunemiku0102/mikumiku/main/public/mikua.jpg';
            }
        });
    
        socket.on('disconnect', () => {
            console.log('Disconnected from server');
        });
    });

    </script>
    <script src="/memory-game.js"></script>
    <script src="/typing-effect.js"></script>
</body>
</html>
